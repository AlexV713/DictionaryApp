<!DOCTYPE html>
<html lang="en">

<head>
    <title>Vue.js and API using Axios</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="initial-scale=1.0">
    <link href="styles.css" rel="stylesheet" type="text/css">
    <!-- Call Vue.js via CDN for templating -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.6.10/vue.min.js"></script>
    <!-- Call the Vue.js router via unpkg -->
    <script src="https://unpkg.com/vue-router/dist/vue-router.js"></script>
    <!-- Call Axios via CDN for API calls -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.18.0/axios.min.js"></script>
</head>

<body>
    <!-- Beginning of block of template code with the ID of 'app'. The <template> tag doesn't do anything except block the W3C validators -->
    <div id="app">
        <template>
            <!-- Did something go wrong? The message below will display. Check the Console to see what the error
            message is, as well. -->
            <section v-if="errored">
                <p>We're sorry, we're not able to retrieve this information at the moment, please try back later</p>
            </section>
            <!-- This is where we loop through the results of our API call if it was successful. -->
            <section v-if="info">
                <!-- My Code -->
                <div id="wrapper">
                    <h1 id="word">{{ info.data[1].hwi.hw }}</h1>
                    <p><strong>Definition 1:</strong> {{ info.data[0].shortdef[0] }}</p>
                    <p><strong>Definition 2:</strong> {{ info.data[0].shortdef[1] }}</p>
                    <p><strong>pronunciation:</strong> {{ info.data[0].hwi.hw }}</p>
                    <p id="stems"><strong>Stems:</strong> {{ info.data[0].meta.stems[1] }},
                        {{ info.data[0].meta.stems[2] }}</p>
                    <p><strong>Word Class:</strong> {{ info.data[0].fl }}</p>
                </div>
                <!-- My Code End -->
                <h2 class="info">Raw data from the API call (remove when you are done developing this page)</h2>
                <pre class="info">{{ info }}</pre>
            </section>
        </template>
    </div>
    <!-- End of block of template code -->

    <!-- Block of code that makes the API call, then puts the data into an object called 'info'
    and finally, allows use of the data in an HTML object with the ID of 'app'. -->
    <script>
        var router = new VueRouter({
            mode: 'history',
            routes: []
        });
        new Vue({
            el: '#app',
            router,
            data() {
                return {
                    info: null,
                    loading: true,
                    errored: false
                }
            },
            mounted() {
                axios

                    // OPTION 2
                    // MERRIAM WEBSTER DICTIONARY - https://dictionaryapi.com/products/json
                    // This one requires a query string in the URL called word
                    // which is the word you want a definition for
                    // Feel free to borrow my API key for now, but get your own at
                    // https://dictionaryapi.com/
                    // Depending on how much detail you want, this one could be challenging!
                    // Refer to the documentation

                    .get("https://dictionaryapi.com/api/v3/references/collegiate/json/" + this.$route.query
                        .word + "?key=fecdee74-1de2-45aa-b460-85c1238457d5")

                    .then(response => {
                        this.info = response
                        console.log(response)
                    })
                    .catch(error => {
                        console.log(error)
                        this.errored = true
                    })
                    .finally(() => this.loading = false)
            }
        })
    </script>
</body>

</html>